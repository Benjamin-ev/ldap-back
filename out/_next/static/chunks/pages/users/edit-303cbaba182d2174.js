(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{3013:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/edit",function(){return n(170)}])},170:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var i=n(5893),r=n(1163),s=n.n(r),o=n(7294),l=n(8658),a=n.n(l),u=n(1287),c=n(2411),d=n(1678);function f(){var e=(0,o.useState)(""),t=e[0],n=e[1],r=(0,o.useState)(""),l=r[0],f=r[1],p=(0,o.useState)(""),h=p[0],m=p[1],y=(0,o.useState)(""),x=y[0],v=y[1],b=(0,o.useState)(""),j=b[0],g=b[1],_=(0,o.useState)(""),w=_[0],N=_[1],C=(0,o.useState)(""),T=C[0],F=C[1],E=(0,o.useState)(""),A=E[0],S=E[1];(0,o.useEffect)((function(){s().query.uid&&(0,c.Z)("/users/user/"+s().query.uid).then((function(e){console.log(e),n(e[0].dn),f(e[0].uid),m(e[0].description),v(e[0].displayName),g(e[0].sn),N(e[0].givenName),F(e[0].mail),S(e[0].mobile)}))}),[s().query.uid]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,c.W)("/users","PUT",{dn:t,uid:l,description:h,displayName:x,sn:j,givenName:w,mail:T,mobile:A}).then((function(e){200==e?(s().push("/"),d.Notify.success("Modification faite !")):d.Notify.failure("Erreur lors de la modification")}))},children:[(0,i.jsxs)("table",{className:a().tableForm,children:[(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"uid=cn"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return f(e.target.value)},value:l,disabled:!0})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"description"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},value:h})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"displayName"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return v(e.target.value)},value:x})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"sn"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return g(e.target.value)},value:j})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"givenName"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return N(e.target.value)},value:w})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"mail"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return F(e.target.value)},value:T})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:"mobile"}),(0,i.jsx)("td",{children:(0,i.jsx)("input",{type:"text",onChange:function(e){return S(e.target.value)},value:A})})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"submit",className:a().bouton,children:"Modifier"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{onClick:function(){T&&(0,c.W)("/users","PATCH",{dn:t,uid:l,mail:T}).then((function(e){200==e?(s().push("/"),d.Notify.success("Mot de passe r\xe9initialis\xe9 !")):d.Notify.failure("Erreur lors de la r\xe9initialisation")}))},className:a().bouton,children:"R\xe9initialiser le Mot de Passe de l'utilisateur"}),(0,i.jsx)("button",{onClick:function(){(0,c.W)("/users","DELETE",{dn:t}).then((function(e){200==e?(s().push("/"),d.Notify.success("Suppression faite !")):d.Notify.failure("Erreur lors de la suppression")}))},className:a().bouton,children:"Supprimer l'utilisateur"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Importer un fichier .csv de modification"}),(0,i.jsx)("p",{children:"Notez que le fichier doit comporter les en-t\xeates \xe0 modifier en 1\xe8re ligne, l'uid doit \xe9galement appara\xeetre en 1ere colonne"}),(0,i.jsx)(u.Z,{handleFiles:function(e){var t=new FileReader;t.onload=function(e){var n=t.result.split("\r\n");(0,c.W)("/users/users","PUT",{headers:n.shift(),users:n}).then((function(e){200==e?(s().push("/"),d.Notify.success("Utilisateurs modifi\xe9s !")):d.Notify.failure("Erreur lors de la modification")}))},t.readAsText(e[0])},fileTypes:".csv",children:(0,i.jsx)("button",{className:a().bouton,children:"Importer"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"R\xe9initialiser les Mots de Passe - Fichier .csv"}),(0,i.jsx)("p",{children:"Le fichier doit contenir la liste des uid \xe0 modifier en 1ere colonne ainsi que les mails correspondants en 2eme"}),(0,i.jsx)(u.Z,{handleFiles:function(e){var t=new FileReader;t.onload=function(e){var n=t.result.split("\r\n");(0,c.W)("/users/users","PATCH",n).then((function(e){200==e?(s().push("/"),d.Notify.success("R\xe9initialisation des mots de passe faite !")):d.Notify.failure("Erreur lors de la r\xe9initialisation")}))},t.readAsText(e[0])},fileTypes:".csv",children:(0,i.jsx)("button",{className:a().bouton,children:"Importer"})})]})]})}},2411:function(e,t,n){"use strict";function i(e){return fetch("https://admin.boquette.fr/api"+e,{method:"GET",headers:{"x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},credentials:"include"}).then((function(e){if(402!=e.status)return e.json();localStorage.removeItem("token"),window.location.reload()}))}function r(e,t,n){return fetch("https://admin.boquette.fr/api"+e,{method:t,headers:{"Content-Type":"application/json","x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify(n),credentials:"include"}).then((function(e){if(402!=e.status)return e.status;localStorage.removeItem("token"),window.location.reload()}))}n.d(t,{W:function(){return r},Z:function(){return i}})},8658:function(e){e.exports={table:"users_table__h0z1h",colonne:"users_colonne__Vh8oO",row:"users_row__R9_Xv",rowHighlight:"users_rowHighlight__fAyyv",bouton:"users_bouton__LVkM6",tableForm:"users_tableForm__yd_uw"}},1287:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(7294)),s=l(n(6522)),o=l(n(5697));function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=function(e){function t(){var e,n,i;a(this,t);for(var r=arguments.length,o=Array(r),l=0;l<r;l++)o[l]=arguments[l];return n=i=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),i.state={elementId:i.props.elementId||(0,s.default)()},i.clickInput=function(){var e=document.getElementById(i.state.elementId);e.value="",e.click()},i.handleFiles=function(e){i.props.base64?i.convertFilesToBase64(e.target.files):i.props.handleFiles(e.target.files)},i.convertFilesToBase64=function(e){var t=e;if(i.props.multipleFiles){var n,r;!function(){var e={base64:[],fileList:t},s=function(){var r=new FileReader,s=t[n];r.onloadend=function(n){e.base64.push(r.result),e.base64.length===t.length&&i.props.handleFiles(e)},r.readAsDataURL(s)};for(n=0,r=t.length;n<r;n++)s()}()}else{var s={base64:"",fileList:t},o=t[0],l=new FileReader;l.onloadend=function(e){s.base64=l.result,i.props.handleFiles(s)},l.readAsDataURL(o)}},u(i,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){return r.default.createElement("div",{className:"react-file-reader"},r.default.createElement("input",{type:"file",onChange:this.handleFiles,accept:Array.isArray(this.props.fileTypes)?this.props.fileTypes.join(","):this.props.fileTypes,className:"react-file-reader-input",id:this.state.elementId,multiple:this.props.multipleFiles,style:{width:"0px",opacity:"0",position:"fixed"},disabled:this.props.disabled}),r.default.createElement("div",{className:"react-file-reader-button",onClick:this.clickInput},this.props.children))}}]),t}(r.default.Component);t.Z=c,c.defaultProps={fileTypes:"image/*",multipleFiles:!1,base64:!1,disabled:!1},c.propTypes={multipleFiles:o.default.bool,handleFiles:o.default.func.isRequired,fileTypes:o.default.oneOfType([o.default.string,o.default.array]),base64:o.default.bool,children:o.default.element.isRequired,disabled:o.default.bool}},6522:function(e,t){var n;!function(){function i(e){return(e=e.toString(16)).length<2&&(e="0"+e),e}function r(){var e=function(){try{return Array.from((window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16)))}catch(t){for(var e=[];e.length<16;)e.push(256*Math.random()&255);return e}}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,(e=e.map(i).join("").match(/(.{8})(.{4})(.{4})(.{4})(.{12})/)).shift(),e.join("-")}var s=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;r.valid=function(e){return s.test(e)},window&&(window.uuid4=r),e.exports&&(e.exports=r),void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},function(e){e.O(0,[678,774,888,179],(function(){return t=3013,e(e.s=t);var t}));var t=e.O();_N_E=t}]);