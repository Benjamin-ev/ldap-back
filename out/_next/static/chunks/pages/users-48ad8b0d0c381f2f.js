(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{7476:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return t(1760)}])},5789:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var s=t(5893),i=t(3532),r=t.n(i),a=t(1664),o=t.n(a),l=t(9008),c=t.n(l),d=t(1163),u=t.n(d);function h(e){return(0,s.jsxs)("div",{className:r().container,children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("meta",{name:"description",content:"Managing page for boquette FR"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.svg"}),(0,s.jsx)("title",{children:"A&M Boquette - Gestion LDAP"})]}),(0,s.jsxs)("header",{className:r().header,children:[(0,s.jsxs)("div",{className:r().subHeader,children:[(0,s.jsx)(o(),{href:"/users",passHref:!0,children:(0,s.jsx)("h2",{className:[r().bouton,"/users"==u().pathname?r().selectedBouton:void 0].join(" "),children:"Gestion des Utilisateurs"})}),(0,s.jsx)(o(),{href:"/groups",passHref:!0,children:(0,s.jsx)("h2",{className:[r().bouton,"/groups"==u().pathname?r().selectedBouton:void 0].join(" "),children:"Gestion des Groupes"})})]}),(0,s.jsxs)("div",{className:r().subHeader,children:[(0,s.jsx)(o(),{href:u().pathname,passHref:!0,children:(0,s.jsx)("h2",{className:[r().bouton,u().query.action?void 0:r().selectedBouton].join(" "),children:"Visualiser"})}),(0,s.jsx)(o(),{href:u().pathname+"?action=add",passHref:!0,children:(0,s.jsx)("h2",{className:[r().bouton,"add"==u().query.action?r().selectedBouton:void 0].join(" "),children:"Ajouter"})}),(0,s.jsx)(o(),{href:u().pathname+"?action=edit",passHref:!0,children:(0,s.jsx)("h2",{className:[r().bouton,"edit"==u().query.action?r().selectedBouton:void 0].join(" "),children:"Editer"})})]})]}),(0,s.jsx)("main",{className:r().main,children:e.children}),(0,s.jsx)("footer",{className:r().footer})]})}},1760:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var s=t(5893),i=t(1163),r=t.n(i),a=t(7294),o=t(1664),l=t.n(o),c=t(5789),d=t(8658),u=t.n(d),h=t(1287),p=t(2411);function m(){var e=(0,a.useState)([]),n=e[0],t=e[1],i=(0,a.useState)(""),o=i[0],d=i[1],h=(0,a.useState)(""),m=h[0],f=h[1];return(0,a.useEffect)((function(){(0,p.Z)("/users").then((function(e){return t(e)}))}),[r().asPath]),(0,s.jsx)(c.Z,{children:(0,s.jsxs)("table",{className:u().table,children:[(0,s.jsxs)("thead",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:u().colonne,children:"uid=cn"}),(0,s.jsx)("th",{className:u().colonne,children:"uidNumber"}),(0,s.jsx)("th",{className:u().colonne,children:"gidNumber"}),(0,s.jsx)("th",{className:u().colonne,children:"description"}),(0,s.jsx)("th",{className:u().colonne,children:"displayName"}),(0,s.jsx)("th",{className:u().colonne,children:"sn"}),(0,s.jsx)("th",{className:u().colonne,children:"givenName"}),(0,s.jsx)("th",{className:u().colonne,children:"mail"}),(0,s.jsx)("th",{className:u().colonne,children:"mobile"}),(0,s.jsx)("th",{className:u().colonne,children:"bouls"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",onChange:function(e){return f(e.target.value)},placeholder:"filtrer"})}),(0,s.jsx)("td",{}),(0,s.jsx)("td",{}),(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",onChange:function(e){return d(e.target.value)},placeholder:"filtrer"})})]})]}),(0,s.jsx)("tbody",{children:null===n||void 0===n?void 0:n.map((function(e,n){var t,i;return-1!=(null===(t=e.uid)||void 0===t?void 0:t.indexOf(m))&&-1!=(null===(i=e.description)||void 0===i?void 0:i.indexOf(o))?(0,s.jsx)(l(),{href:r().pathname+"?action=edit&uid="+e.uid,passHref:!0,children:(0,s.jsxs)("tr",{className:u().rowHighlight,children:[(0,s.jsx)("td",{className:u().row,children:e.uid},n+"uid"),(0,s.jsx)("td",{className:u().row,children:e.uidNumber},n+"uidNumber"),(0,s.jsx)("td",{className:u().row,children:e.gidNumber},n+"gid"),(0,s.jsx)("td",{className:u().row,children:e.description},n+"description"),(0,s.jsx)("td",{className:u().row,children:e.displayName},n+"displayName"),(0,s.jsx)("td",{className:u().row,children:e.sn},n+"sn"),(0,s.jsx)("td",{className:u().row,children:e.givenName},n+"givenName"),(0,s.jsx)("td",{className:u().row,children:e.mail},n+"mail"),(0,s.jsx)("td",{className:u().row,children:e.mobile},n+"mobile"),(0,s.jsx)("td",{className:u().row,children:e.bouls},n+"bouls")]},n+"tr")},n+"link"):void 0}))})]})})}function f(){var e=(0,a.useState)({uid:"",description:"",displayName:"",sn:"",givenName:"",mail:"",mobile:"",bouls:"",isInGrps:""}),n=e[0],t=e[1];(0,a.useEffect)((function(){r().query.uid&&(0,p.Z)("/users/user/"+r().query.uid).then((function(e){return t(e[0])}))}),[r().query.uid]);var i=function(e){return function(s){var i=n;i[e]=s.target.value,t(i)}};return(0,s.jsxs)(c.Z,{children:[(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,p.W)("/users","POST",n).then((function(e){200==e&&r().push("/users")}))},children:[(0,s.jsxs)("table",{className:u().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:u().colonne,children:"uid=cn"}),(0,s.jsx)("th",{className:u().colonne,children:"description"}),(0,s.jsx)("th",{className:u().colonne,children:"displayName"}),(0,s.jsx)("th",{className:u().colonne,children:"sn"}),(0,s.jsx)("th",{className:u().colonne,children:"givenName"}),(0,s.jsx)("th",{className:u().colonne,children:"mail"}),(0,s.jsx)("th",{className:u().colonne,children:"mobile"}),(0,s.jsx)("th",{className:u().colonne,children:"bouls"})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:u().rowHighlight,children:[(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("uid")})},"uid"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("description")})},"description"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("displayName")})},"displayName"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("sn")})},"sn"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("givenName")})},"givenName"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("mail")})},"mail"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("mobile")})},"mobile"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("bouls")})},"bouls")]},"tr")})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:u().bouton,children:"Ajouter un utilisateur"})})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Importer un fichier .csv"}),(0,s.jsx)("p",{children:"Notez que le fichier ne doit pas comporter d'en-t\xeates mais qu'elles doivent \xeatre dans le m\xeame ordre que ci-dessus"}),(0,s.jsx)("p",{children:"Si une case est vide, mettre un espace \xe0 la place, sous peine d'annuler l'ajout"}),(0,s.jsx)(h.Z,{handleFiles:function(e){var n=new FileReader;n.onload=function(e){(0,p.W)("/users/users","POST",n.result.split("\r\n")).then((function(e){200==e&&r().push("/users")}))},n.readAsText(e[0])},fileTypes:".csv",children:(0,s.jsx)("button",{className:u().bouton,children:"Importer"})})]})]})}function x(){var e=(0,a.useState)({uid:"",description:"",displayName:"",sn:"",givenName:"",mail:"",mobile:"",bouls:"",isInGrps:""}),n=e[0],t=e[1];(0,a.useEffect)((function(){r().query.uid&&(0,p.Z)("/users/user/"+r().query.uid).then((function(e){return t(e[0])}))}),[r().query.uid]);var i=function(e){return function(s){var i=n;i[e]=s.target.value,t(i)}};return(0,s.jsxs)(c.Z,{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,p.W)("/users","PUT",n).then((function(e){200==e&&r().push("/users")}))},children:[(0,s.jsxs)("table",{className:u().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:u().colonne,children:"uid=cn"}),(0,s.jsx)("th",{className:u().colonne,children:"description"}),(0,s.jsx)("th",{className:u().colonne,children:"displayName"}),(0,s.jsx)("th",{className:u().colonne,children:"sn"}),(0,s.jsx)("th",{className:u().colonne,children:"givenName"}),(0,s.jsx)("th",{className:u().colonne,children:"mail"}),(0,s.jsx)("th",{className:u().colonne,children:"mobile"}),(0,s.jsx)("th",{className:u().colonne,children:"bouls"})]})}),(0,s.jsx)("tbody",{children:""!==n.uid?(0,s.jsxs)("tr",{className:u().rowHighlight,children:[(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("uid"),placeholder:n.uid,disabled:!0})},"uid"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("description"),placeholder:n.description})},"description"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("displayName"),placeholder:n.displayName})},"displayName"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("sn"),placeholder:n.sn})},"sn"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("givenName"),placeholder:n.givenName})},"givenName"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("mail"),placeholder:n.mail})},"mail"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("mobile"),placeholder:n.mobile})},"mobile"),(0,s.jsx)("td",{className:u().row,children:(0,s.jsx)("input",{type:"text",onChange:i("bouls"),placeholder:n.bouls})},"bouls")]},"tr"):void 0})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:u().bouton,children:"Modifier"})})]}),(0,s.jsx)("button",{onClick:function(){},className:u().bouton,children:"Modifier le Mot de Passe de l'utilisateur"}),(0,s.jsx)("button",{onClick:function(){(0,p.W)("/users","DELETE",{dn:n.dn}).then((function(e){200==e&&r().push("/users")}))},className:u().bouton,children:"Supprimer l'utilisateur"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Importer un fichier .csv de modification"}),(0,s.jsx)("p",{children:"Notez que le fichier doit comporter les en-t\xeates \xe0 modifier en 1\xe8re ligne, l'uid doit \xe9galement appara\xeetre en 1ere colonne"}),(0,s.jsx)(h.Z,{handleFiles:function(e){var n=new FileReader;n.onload=function(e){var t=n.result.split("\r\n");(0,p.W)("/users/users","PUT",{headers:t.shift(),users:t}).then((function(e){200==e&&r().push("/users")}))},n.readAsText(e[0])},fileTypes:".csv",children:(0,s.jsx)("button",{className:u().bouton,children:"Importer"})})]})]})}function j(){switch(r().query.action){case"add":return(0,s.jsx)(f,{});case"edit":return(0,s.jsx)(x,{});default:return(0,s.jsx)(m,{})}}},2411:function(e,n,t){"use strict";function s(e){return fetch("https://utilisateur.boquette.fr/api"+e,{method:"GET",headers:{"x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},credentials:"include"}).then((function(e){if(200==e.status)return e.json();localStorage.removeItem("token"),window.location.reload()}))}function i(e,n,t){return fetch("https://utilisateur.boquette.fr/api"+e,{method:n,headers:{"Content-Type":"application/json","x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t),credentials:"include"}).then((function(e){if(200==e.status)return e.status;localStorage.removeItem("token"),window.location.reload()}))}t.d(n,{W:function(){return i},Z:function(){return s}})},3532:function(e){e.exports={container:"Layout_container__a4TgG",main:"Layout_main__T635V",form:"Layout_form__h8n_g",header:"Layout_header__5T1Lo",subHeader:"Layout_subHeader__UEtRY",bouton:"Layout_bouton__eeQZ9",selectedBouton:"Layout_selectedBouton__kIBwc"}},8658:function(e){e.exports={table:"users_table__h0z1h",colonne:"users_colonne__Vh8oO",row:"users_row__R9_Xv",rowHighlight:"users_rowHighlight__fAyyv",bouton:"users_bouton__LVkM6"}},1287:function(e,n,t){"use strict";var s=function(){function e(e,n){for(var t=0;t<n.length;t++){var s=n[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(n,t,s){return t&&e(n.prototype,t),s&&e(n,s),n}}(),i=o(t(7294)),r=o(t(6522)),a=o(t(5697));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function c(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==typeof n&&"function"!==typeof n?e:n}var d=function(e){function n(){var e,t,s;l(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=s=c(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),s.state={elementId:s.props.elementId||(0,r.default)()},s.clickInput=function(){var e=document.getElementById(s.state.elementId);e.value="",e.click()},s.handleFiles=function(e){s.props.base64?s.convertFilesToBase64(e.target.files):s.props.handleFiles(e.target.files)},s.convertFilesToBase64=function(e){var n=e;if(s.props.multipleFiles){var t,i;!function(){var e={base64:[],fileList:n},r=function(){var i=new FileReader,r=n[t];i.onloadend=function(t){e.base64.push(i.result),e.base64.length===n.length&&s.props.handleFiles(e)},i.readAsDataURL(r)};for(t=0,i=n.length;t<i;t++)r()}()}else{var r={base64:"",fileList:n},a=n[0],o=new FileReader;o.onloadend=function(e){r.base64=o.result,s.props.handleFiles(r)},o.readAsDataURL(a)}},c(s,t)}return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),s(n,[{key:"render",value:function(){return i.default.createElement("div",{className:"react-file-reader"},i.default.createElement("input",{type:"file",onChange:this.handleFiles,accept:Array.isArray(this.props.fileTypes)?this.props.fileTypes.join(","):this.props.fileTypes,className:"react-file-reader-input",id:this.state.elementId,multiple:this.props.multipleFiles,style:{width:"0px",opacity:"0",position:"fixed"},disabled:this.props.disabled}),i.default.createElement("div",{className:"react-file-reader-button",onClick:this.clickInput},this.props.children))}}]),n}(i.default.Component);n.Z=d,d.defaultProps={fileTypes:"image/*",multipleFiles:!1,base64:!1,disabled:!1},d.propTypes={multipleFiles:a.default.bool,handleFiles:a.default.func.isRequired,fileTypes:a.default.oneOfType([a.default.string,a.default.array]),base64:a.default.bool,children:a.default.element.isRequired,disabled:a.default.bool}},6522:function(e,n){var t;!function(){function s(e){return(e=e.toString(16)).length<2&&(e="0"+e),e}function i(){var e=function(){try{return Array.from((window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16)))}catch(n){for(var e=[];e.length<16;)e.push(256*Math.random()&255);return e}}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,(e=e.map(s).join("").match(/(.{8})(.{4})(.{4})(.{4})(.{12})/)).shift(),e.join("-")}var r=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;i.valid=function(e){return r.test(e)},window&&(window.uuid4=i),e.exports&&(e.exports=i),void 0===(t=function(){return i}.apply(n,[]))||(e.exports=t)}()}},function(e){e.O(0,[664,774,888,179],(function(){return n=7476,e(e.s=n);var n}));var n=e.O();_N_E=n}]);