(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{7789:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/groups",function(){return t(9899)}])},5789:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var s=t(5893),r=t(3532),o=t.n(r),i=t(1664),c=t.n(i),a=t(9008),l=t.n(a),u=t(1163),d=t.n(u);function h(e){return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("meta",{name:"description",content:"Managing page for boquette FR"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.svg"}),(0,s.jsx)("title",{children:"A&M Boquette - Gestion LDAP"})]}),(0,s.jsxs)("header",{className:o().header,children:[(0,s.jsxs)("div",{className:o().subHeader,children:[(0,s.jsx)(c(),{href:"/users",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"/users"==d().pathname?o().selectedBouton:void 0].join(" "),children:"Gestion des Utilisateurs"})}),(0,s.jsx)(c(),{href:"/groups",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"/groups"==d().pathname?o().selectedBouton:void 0].join(" "),children:"Gestion des Groupes"})})]}),(0,s.jsxs)("div",{className:o().subHeader,children:[(0,s.jsx)(c(),{href:d().pathname,passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,d().query.action?void 0:o().selectedBouton].join(" "),children:"Visualiser"})}),(0,s.jsx)(c(),{href:d().pathname+"?action=add",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"add"==d().query.action?o().selectedBouton:void 0].join(" "),children:"Ajouter"})}),(0,s.jsx)(c(),{href:d().pathname+"?action=edit",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"edit"==d().query.action?o().selectedBouton:void 0].join(" "),children:"Editer"})})]})]}),(0,s.jsx)("main",{className:o().main,children:e.children}),(0,s.jsx)("footer",{className:o().footer})]})}},9899:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var s=t(5893),r=t(1163),o=t.n(r),i=t(7294),c=t(1664),a=t.n(c),l=t(5789),u=t(4542),d=t.n(u),h=t(2411);function p(){var e=(0,i.useState)([]),n=e[0],t=e[1],r=(0,i.useState)([]),c=r[0],u=r[1],p=(0,i.useState)({cn:"",description:"",strass:""}),x=p[0],m=p[1],f=(0,i.useState)(!0),j=f[0],g=f[1],b=(0,i.useState)(""),N=b[0],_=b[1],v=(0,i.useState)(""),w=v[0],y=v[1],C=(0,i.useState)(""),H=C[0],k=C[1];switch((0,i.useEffect)((function(){(0,h.Z)("/groups").then((function(e){return u(e)}))}),[o().asPath]),(0,i.useEffect)((function(){!o().query.cn&&j||((0,h.Z)("/groups/group/"+o().query.cn).then((function(e){return m(e[0])})),(0,h.Z)("/users").then((function(e){return t(e)})),g(!0))}),[o().query.cn,j]),o().query.action){case"add":return function(e,n){var t=function(n){n.preventDefault(),(0,h.W)("/groups","POST",e).then((function(e){200==e&&o().push("/groups")}))},r=function(t){return function(s){var r=e;r[t]=s.target.value,n(r)}};return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("form",{onSubmit:t,children:[(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:r("cn")})},"cn"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:r("description")})},"description"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:r("strass")})},"strass")]},"tr")})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:d().bouton,children:"Ajouter un groupe"})})]})})}(x,m);case"edit":return function(e,n,t,r,i,c,a,u){var p=function(t){return function(s){var r=e;r[t]=s.target.value,n(r)}},x=function(n){n.preventDefault(),(0,h.W)("/groups","PUT",e).then((function(e){200==e&&o().push("/groups")}))},m=function(){(0,h.W)("/groups","DELETE",{dn:e.dn}).then((function(e){200==e&&o().push("/groups")}))},f=function(n,t){(0,h.W)("/groups","PATCH",{user:n,group:e,action:t}).then((function(e){200==e&&r(!1)}))};return(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)("form",{onSubmit:x,children:[(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"gidNumber"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:""!==e.cn?(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:p("cn"),placeholder:e.cn})},"cn"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:p("description"),placeholder:e.description})},"description"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:p("gidNumber"),placeholder:e.gidNumber,disabled:!0})},"gidNumber"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:p("strass"),placeholder:e.strass})},"strass")]},"tr"):void 0})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:d().bouton,children:"Modifier"})})]}),(0,s.jsx)("button",{onClick:m,className:d().bouton,children:"Supprimer le groupe"}),(0,s.jsxs)("div",{className:d().groupManage,children:[(0,s.jsxs)("div",{className:d().groupMembers,children:[(0,s.jsx)("h1",{children:"Membres du groupe"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return u(e.target.value)},placeholder:"filtrer"}),(0,s.jsx)("ul",{className:d().list,children:e.memberUid?"object"==typeof e.memberUid?e.memberUid.map((function(e){return-1!=e.indexOf(a)?(0,s.jsx)("button",{className:d().defaultButton,onClick:function(){return f(e,"del")},children:(0,s.jsx)("li",{className:d().eltLi,children:e},e)},e+"button"):void 0})):-1!=e.memberUid.indexOf(a)?(0,s.jsx)("button",{className:d().defaultButton,onClick:function(){return f(e.memberUid,"del")},children:(0,s.jsx)("li",{className:d().eltLi,children:e.memberUid},e.memberUid)},"button"):void 0:void 0})]}),(0,s.jsxs)("div",{className:d().groupMembers,children:[(0,s.jsx)("h1",{children:"Autres utilisateurs"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},placeholder:"filtrer"}),(0,s.jsx)("ul",{className:d().list,children:null===t||void 0===t?void 0:t.map((function(e){return-1!=e.uid.indexOf(i)?(0,s.jsx)("button",{className:d().defaultButton,onClick:function(){return f(e.uid,"add")},children:(0,s.jsx)("li",{className:d().eltLi,children:e.uid},e.uid)},e.uid+"button"):void 0}))})]})]})]})}(x,m,n,g,w,y,N,_);default:return function(e,n,t){return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsxs)("thead",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"gidNumber"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]}),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",onChange:function(e){return n(e.target.value)},placeholder:"filtrer"})})})]}),(0,s.jsx)("tbody",{children:null===e||void 0===e?void 0:e.map((function(e,n){return-1!=e.cn.indexOf(t)?(0,s.jsx)(a(),{href:o().pathname+"?action=edit&cn="+e.cn,passHref:!0,children:(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:e.cn},n+"cn"),(0,s.jsx)("td",{className:d().row,children:e.description},n+"description"),(0,s.jsx)("td",{className:d().row,children:e.gidNumber},n+"gid"),(0,s.jsx)("td",{className:d().row,children:e.strass},n+"strass")]},n+"tr")},n+"link"):void 0}))})]})})}(c,k,H)}}},2411:function(e,n,t){"use strict";function s(e){return fetch("https://utilisateur.boquette.fr/api"+e,{method:"GET",headers:{"x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},credentials:"include"}).then((function(e){if(200==e.status)return e.json();localStorage.removeItem("token"),window.location.reload()}))}function r(e,n,t){return fetch("https://utilisateur.boquette.fr/api"+e,{method:n,headers:{"Content-Type":"application/json","x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t),credentials:"include"}).then((function(e){if(200==e.status)return e.status;localStorage.removeItem("token"),window.location.reload()}))}t.d(n,{W:function(){return r},Z:function(){return s}})},3532:function(e){e.exports={container:"Layout_container__a4TgG",main:"Layout_main__T635V",form:"Layout_form__h8n_g",header:"Layout_header__5T1Lo",subHeader:"Layout_subHeader__UEtRY",bouton:"Layout_bouton__eeQZ9",selectedBouton:"Layout_selectedBouton__kIBwc"}},4542:function(e){e.exports={table:"groups_table__m45hf",colonne:"groups_colonne__oH7uo",row:"groups_row__aHhwl",rowHighlight:"groups_rowHighlight__wRgXT",bouton:"groups_bouton__EbIZJ",list:"groups_list__ZcniW",eltLi:"groups_eltLi__0h699",groupManage:"groups_groupManage__BkZrQ",groupMembers:"groups_groupMembers__XqAHX",defaultButton:"groups_defaultButton__HxCZq"}}},function(e){e.O(0,[664,774,888,179],(function(){return n=7789,e(e.s=n);var n}));var n=e.O();_N_E=n}]);