(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{7789:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/groups",function(){return n(28)}])},5789:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(5893),r=n(3532),o=n.n(r),i=n(1664),a=n.n(i),c=n(9008),u=n.n(c),l=n(1163),d=n.n(l);function h(e){return(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsxs)(u(),{children:[(0,s.jsx)("meta",{name:"description",content:"Managing page for boquette FR"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.svg"}),(0,s.jsx)("title",{children:"A&M Boquette - Gestion LDAP"})]}),(0,s.jsxs)("header",{className:o().header,children:[(0,s.jsxs)("div",{className:o().subHeader,children:[(0,s.jsx)(a(),{href:"/users",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"/users"==d().pathname?o().selectedBouton:void 0].join(" "),children:"Gestion des Utilisateurs"})}),(0,s.jsx)(a(),{href:"/groups",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"/groups"==d().pathname?o().selectedBouton:void 0].join(" "),children:"Gestion des Groupes"})})]}),(0,s.jsxs)("div",{className:o().subHeader,children:[(0,s.jsx)(a(),{href:d().pathname,passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,d().query.action?void 0:o().selectedBouton].join(" "),children:"Visualiser"})}),(0,s.jsx)(a(),{href:d().pathname+"?action=add",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"add"==d().query.action?o().selectedBouton:void 0].join(" "),children:"Ajouter"})}),(0,s.jsx)(a(),{href:d().pathname+"?action=edit",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"edit"==d().query.action?o().selectedBouton:void 0].join(" "),children:"Editer"})})]})]}),(0,s.jsx)("main",{className:o().main,children:e.children}),(0,s.jsx)("footer",{className:o().footer})]})}},28:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var s=n(5893),r=n(1163),o=n.n(r),i=n(7294),a=n(1664),c=n.n(a),u=n(5789),l=n(4542),d=n.n(l),h=n(2411);function x(){var e=(0,i.useState)([]),t=e[0],n=e[1],r=(0,i.useState)(""),a=r[0],l=r[1];return(0,i.useEffect)((function(){(0,h.Z)("/groups").then((function(e){return n(e)}))}),[o().asPath]),(0,s.jsx)(u.Z,{children:(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsxs)("thead",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"gidNumber"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]}),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{children:(0,s.jsx)("input",{type:"text",onChange:function(e){return l(e.target.value)},placeholder:"filtrer"})})})]}),(0,s.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){return-1!=e.cn.indexOf(a)?(0,s.jsx)(c(),{href:o().pathname+"?action=edit&cn="+e.cn,passHref:!0,children:(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:e.cn},t+"cn"),(0,s.jsx)("td",{className:d().row,children:e.description},t+"description"),(0,s.jsx)("td",{className:d().row,children:e.gidNumber},t+"gid"),(0,s.jsx)("td",{className:d().row,children:e.strass},t+"strass")]},t+"tr")},t+"link"):void 0}))})]})})}function p(){var e=(0,i.useState)(""),t=e[0],n=e[1],r=(0,i.useState)(""),a=r[0],c=r[1],l=(0,i.useState)(""),x=l[0],p=l[1];return(0,s.jsx)(u.Z,{children:(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,h.W)("/groups","POST",{cn:t,description:a,strass:x}).then((function(e){200==e&&o().push("/groups")}))},children:[(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:function(e){return n(e.target.value)}})},"cn"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)}})},"description"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:function(e){return p(e.target.value)}})},"strass")]},"tr")})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:d().bouton,children:"Ajouter un groupe"})})]})})}function f(){var e=(0,i.useState)(""),t=e[0],n=e[1],r=(0,i.useState)(""),a=r[0],c=r[1],l=(0,i.useState)(""),x=l[0],p=l[1],f=(0,i.useState)(""),j=f[0],m=f[1],g=(0,i.useState)([]),_=g[0],N=g[1],b=(0,i.useState)([]),v=b[0],w=b[1],y=(0,i.useState)(!0),S=y[0],C=y[1],H=(0,i.useState)(""),k=H[0],A=H[1],B=(0,i.useState)(""),L=B[0],E=B[1];(0,i.useEffect)((function(){!o().query.cn&&S||((0,h.Z)("/groups/group/"+o().query.cn).then((function(e){n(e[0].dn),c(e[0].cn),p(e[0].description),m(e[0].strass),N(e[0].memberUid)})),(0,h.Z)("/users").then((function(e){return w(e)})),C(!0))}),[o().query.cn,S]);var q=function(e,t){(0,h.W)("/groups","PATCH",{user:e,cn:a,action:t}).then((function(e){200==e&&C(!1)}))};return(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)("form",{onSubmit:function(e){e.preventDefault(),(0,h.W)("/groups","PUT",{dn:t,cn:a,description:x,strass:j}).then((function(e){200==e&&o().push("/groups")}))},children:[(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:a?(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},value:a,disabled:!0})},"cn"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:function(e){return p(e.target.value)},value:x})},"description"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},value:j})},"strass")]},"tr"):void 0})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:d().bouton,children:"Modifier"})})]}),(0,s.jsx)("button",{onClick:function(){(0,h.W)("/groups","DELETE",{dn:t}).then((function(e){200==e&&o().push("/groups")}))},className:d().bouton,children:"Supprimer le groupe"}),(0,s.jsxs)("div",{className:d().groupManage,children:[(0,s.jsxs)("div",{className:d().groupMembers,children:[(0,s.jsx)("h1",{children:"Membres du groupe"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return A(e.target.value)},placeholder:"filtrer"}),(0,s.jsx)("ul",{className:d().list,children:_?"object"==typeof _?_.map((function(e){return-1!=e.indexOf(k)?(0,s.jsx)("button",{className:d().defaultButton,onClick:function(){return q(e,"del")},children:(0,s.jsx)("li",{className:d().eltLi,children:e},e)},e+"button"):void 0})):-1!=_.indexOf(k)?(0,s.jsx)("button",{className:d().defaultButton,onClick:function(){return q(_,"del")},children:(0,s.jsx)("li",{className:d().eltLi,children:_},_)},"button"):void 0:void 0})]}),(0,s.jsxs)("div",{className:d().groupMembers,children:[(0,s.jsx)("h1",{children:"Autres utilisateurs"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return E(e.target.value)},placeholder:"filtrer"}),(0,s.jsx)("ul",{className:d().list,children:null===v||void 0===v?void 0:v.map((function(e){return-1==e.uid.indexOf(L)||(null===_||void 0===_?void 0:_.includes(e.uid))?void 0:(0,s.jsx)("button",{className:d().defaultButton,onClick:function(){return q(e.uid,"add")},children:(0,s.jsx)("li",{className:d().eltLi,children:e.uid},e.uid)},e.uid+"button")}))})]})]})]})}function j(){switch(o().query.action){case"add":return(0,s.jsx)(p,{});case"edit":return(0,s.jsx)(f,{});default:return(0,s.jsx)(x,{})}}},2411:function(e,t,n){"use strict";function s(e){return fetch("https://utilisateur.boquette.fr/api"+e,{method:"GET",headers:{"x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},credentials:"include"}).then((function(e){if(200==e.status)return e.json();localStorage.removeItem("token"),window.location.reload()}))}function r(e,t,n){return fetch("https://utilisateur.boquette.fr/api"+e,{method:t,headers:{"Content-Type":"application/json","x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify(n),credentials:"include"}).then((function(e){if(200==e.status)return e.status;localStorage.removeItem("token"),window.location.reload()}))}n.d(t,{W:function(){return r},Z:function(){return s}})},3532:function(e){e.exports={container:"Layout_container__a4TgG",main:"Layout_main__T635V",form:"Layout_form__h8n_g",header:"Layout_header__5T1Lo",subHeader:"Layout_subHeader__UEtRY",bouton:"Layout_bouton__eeQZ9",selectedBouton:"Layout_selectedBouton__kIBwc"}},4542:function(e){e.exports={table:"groups_table__m45hf",colonne:"groups_colonne__oH7uo",row:"groups_row__aHhwl",rowHighlight:"groups_rowHighlight__wRgXT",bouton:"groups_bouton__EbIZJ",list:"groups_list__ZcniW",eltLi:"groups_eltLi__0h699",groupManage:"groups_groupManage__BkZrQ",groupMembers:"groups_groupMembers__XqAHX",defaultButton:"groups_defaultButton__HxCZq"}}},function(e){e.O(0,[664,774,888,179],(function(){return t=7789,e(e.s=t);var t}));var t=e.O();_N_E=t}]);