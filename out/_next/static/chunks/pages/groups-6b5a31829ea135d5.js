(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[736],{7789:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/groups",function(){return t(9899)}])},5789:function(e,n,t){"use strict";t.d(n,{Z:function(){return p}});var s=t(5893),r=t(3532),o=t.n(r),i=t(1664),c=t.n(i),a=t(9008),l=t.n(a),u=t(1163),d=t.n(u),h=t(7294);function p(e){var n=(0,h.useState)(!1),t=n[0],r=n[1];return(0,h.useEffect)((function(){t&&setTimeout((function(){alert("Les groupes ont \xe9t\xe9 mis \xe0 jour"),r(!1)}),100)}),[t]),(0,s.jsxs)("div",{className:o().container,children:[(0,s.jsxs)(l(),{children:[(0,s.jsx)("meta",{name:"description",content:"Managing page for boquette FR"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.svg"}),(0,s.jsx)("title",{children:"A&M Boquette - Gestion LDAP"})]}),(0,s.jsxs)("header",{className:o().header,children:[(0,s.jsxs)("div",{className:o().subHeader,children:[(0,s.jsx)(c(),{href:"/users",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"/users"==d().pathname?o().selectedBouton:void 0].join(" "),children:"Gestion des Utilisateurs"})}),(0,s.jsx)(c(),{href:"/groups",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"/groups"==d().pathname?o().selectedBouton:void 0].join(" "),children:"Gestion des Groupes"})})]}),(0,s.jsxs)("div",{className:o().subHeader,children:[(0,s.jsx)(c(),{href:d().pathname,passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,d().query.action?void 0:o().selectedBouton].join(" "),children:"Visualiser"})}),(0,s.jsx)(c(),{href:d().pathname+"?action=add",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"add"==d().query.action?o().selectedBouton:void 0].join(" "),children:"Ajouter"})}),(0,s.jsx)(c(),{href:d().pathname+"?action=edit",passHref:!0,children:(0,s.jsx)("h2",{className:[o().bouton,"edit"==d().query.action?o().selectedBouton:void 0].join(" "),children:"Editer"})}),(0,s.jsx)("button",{onClick:function(e){fetch("https://utilisateur.boquette.fr/api/groups",{method:"PATCH",headers:{"Content-Type":"application/json","x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},credentials:"include"}).then((function(e){200==e.status?r(!0):(localStorage.removeItem("token"),window.location.reload())}))},children:"Actualiser les Groupes"})]})]}),(0,s.jsx)("main",{className:o().main,children:e.children}),(0,s.jsx)("footer",{className:o().footer})]})}},9899:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var s=t(5893),r=t(1163),o=t.n(r),i=t(7294),c=t(1664),a=t.n(c),l=t(5789),u=t(4542),d=t.n(u),h=t(2411);function p(){var e=(0,i.useState)([]),n=e[0],t=e[1],r=(0,i.useState)({cn:"",description:"",strass:""}),c=r[0],u=r[1];switch((0,i.useEffect)((function(){(0,h.Z)("/groups").then((function(e){return t(e)}))}),[o().asPath]),(0,i.useEffect)((function(){o().query.cn&&(0,h.Z)("/groups/group/"+o().query.cn).then((function(e){return u(e[0])}))}),[o().query.cn]),o().query.action){case"add":return function(e,n){var t=function(n){n.preventDefault(),(0,h.W)("/groups","POST",e).then((function(e){200==e&&o().push("/groups")}))},r=function(t){return function(s){var r=e;r[t]=s.target.value,n(r)}};return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("form",{onSubmit:t,children:[(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:r("cn")})},"cn"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:r("description")})},"description"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:r("strass")})},"strass")]},"tr")})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:d().bouton,children:"Ajouter un groupe"})})]})})}(c,u);case"edit":return function(e,n){var t=function(t){return function(s){var r=e;r[t]=s.target.value,n(r)}},r=function(n){n.preventDefault(),(0,h.W)("/groups","PUT",e).then((function(e){200==e&&o().push("/groups")}))},i=function(){(0,h.W)("/groups","DELETE",{dn:e.dn}).then((function(e){200==e&&o().push("/groups")}))};return(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)("form",{onSubmit:r,children:[(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"gidNumber"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:""!==e.cn?(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:t("cn"),placeholder:e.cn})},"cn"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:t("description"),placeholder:e.description})},"description"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:t("gidNumber"),placeholder:e.gidNumber,disabled:!0})},"gidNumber"),(0,s.jsx)("td",{className:d().row,children:(0,s.jsx)("input",{type:"text",onChange:t("strass"),placeholder:e.strass})},"strass")]},"tr"):void 0})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",className:d().bouton,children:"Modifier"})})]}),(0,s.jsx)("button",{onClick:i,className:d().bouton,children:"Supprimer le groupe"}),(0,s.jsx)("h1",{children:"Membres du Groupe"}),(0,s.jsxs)("ul",{className:d().list,children:["string"==typeof e.memberUid?(0,s.jsx)("li",{className:d().eltLi,children:e.memberUid},e.memberUid):void 0,"object"==typeof e.memberUid?e.memberUid.map((function(e){return(0,s.jsx)("li",{className:d().eltLi,children:e},e)})):void 0]})]})}(c,u);default:return function(e){return(0,s.jsx)(l.Z,{children:(0,s.jsxs)("table",{className:d().table,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:d().colonne,children:"cn"}),(0,s.jsx)("th",{className:d().colonne,children:"description"}),(0,s.jsx)("th",{className:d().colonne,children:"gidNumber"}),(0,s.jsx)("th",{className:d().colonne,children:"strass"})]})}),(0,s.jsx)("tbody",{children:e?e.map((function(e,n){return(0,s.jsx)(a(),{href:o().pathname+"?action=edit&cn="+e.cn,passHref:!0,children:(0,s.jsxs)("tr",{className:d().rowHighlight,children:[(0,s.jsx)("td",{className:d().row,children:e.cn},n+"cn"),(0,s.jsx)("td",{className:d().row,children:e.description},n+"description"),(0,s.jsx)("td",{className:d().row,children:e.gidNumber},n+"gid"),(0,s.jsx)("td",{className:d().row,children:e.strass},n+"strass")]},n+"tr")},n+"link")})):void 0})]})})}(n)}}},2411:function(e,n,t){"use strict";function s(e){return fetch("https://utilisateur.boquette.fr/api"+e,{method:"GET",headers:{"x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},credentials:"include"}).then((function(e){if(200==e.status)return e.json();localStorage.removeItem("token"),window.location.reload()}))}function r(e,n,t){return fetch("https://utilisateur.boquette.fr/api"+e,{method:n,headers:{"Content-Type":"application/json","x-xsrf-token":JSON.parse(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true"},body:JSON.stringify(t),credentials:"include"}).then((function(e){if(200==e.status)return e.status;localStorage.removeItem("token"),window.location.reload()}))}t.d(n,{W:function(){return r},Z:function(){return s}})},3532:function(e){e.exports={container:"Layout_container__a4TgG",main:"Layout_main__T635V",form:"Layout_form__h8n_g",header:"Layout_header__5T1Lo",subHeader:"Layout_subHeader__UEtRY",bouton:"Layout_bouton__eeQZ9",selectedBouton:"Layout_selectedBouton__kIBwc"}},4542:function(e){e.exports={table:"groups_table__m45hf",colonne:"groups_colonne__oH7uo",row:"groups_row__aHhwl",rowHighlight:"groups_rowHighlight__wRgXT",bouton:"groups_bouton__EbIZJ",list:"groups_list__ZcniW",eltLi:"groups_eltLi__0h699"}}},function(e){e.O(0,[664,774,888,179],(function(){return n=7789,e(e.s=n);var n}));var n=e.O();_N_E=n}]);